<div class="container">
    <div class="detailsContainer">
        <form [formGroup] = "checkOutForm" (ngSubmit)="finalCheckOut()">
            <div class="leftDiv">
                <p>Personal Details</p>
                <div class="form-group">
                    <label>Name:</label>
                    <input class="form-control" type="text" placeholder="Enter name" formControlName="name1"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['name1'].errors}" pattern="^[a-zA-Z]+$">
                    <div *ngIf="submitted && checkOutForm.controls['name1'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['name1'].errors['required']">
                            Name is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['name1'].errors['pattern']">
                            Name should only contain letters
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input class="form-control" type="email" formControlName="email"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['email'].errors}" class="form-control">
                    <div *ngIf="submitted && checkOutForm.controls['email'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['email'].errors['required']">
                            Email is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['email'].errors['email']">
                            Please writer a valid email
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Contact: (111-111-1111)</label>
                    <input class="form-control" type="text" formControlName="contact"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['contact'].errors}">
                    <div *ngIf="submitted && checkOutForm.controls['contact'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['contact'].errors['required']">
                            Contact is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['contact'].errors['pattern']">
                            Invalid contact number
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputAddress">Address: </label>
                    <input type="text" class="form-control" id="inputAddress" formControlName="address"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['address'].errors}">
                    <div *ngIf="submitted && checkOutForm.controls['address'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['address'].errors['required']">
                            Address is required
                        </div>
                    </div>
                </div>
                
                <label for="inputAddress2">Address 2: (Optional)</label>
                <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor">

                <div class="form-group">
                    <label for="inputCity">City</label>
                    <input type="text" class="form-control" id="inputCity" formControlName="city"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['city'].errors}">
                    <div *ngIf="submitted && checkOutForm.controls['city'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['city'].errors['required']">
                            City is required
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="inputState">Province:</label>
                    <select id="inputState" class="form-control" formControlName="province"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['province'].errors}">
                        <option selected>--Choose--</option>
                        <option>Alberta</option>
                        <option>British Columbia</option>
                        <option>Ontario</option>
                        <option>Manitoba</option>
                        <option>Quebec</option>
                    </select>
                    <div *ngIf="submitted && checkOutForm.controls['province'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['province'].errors['required']">
                            Province is required
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="inputZip">Postal Code: (X1X1X1)</label>
                    <input type="text" class="form-control" id="inputZip" placeholder="X1X1X1" required pattern="[A-Za-z]{2}\d{2}[A-Za-z]{2}" 
                        formControlName="code" [ngClass]="{'is-invalid': submitted && checkOutForm.controls['code'].errors}">
                        <div *ngIf="submitted && checkOutForm.controls['code'].errors" class="text-danger">
                            <div *ngIf="submitted && checkOutForm.controls['code'].errors['required']">
                                Postal Code is required
                            </div>
                            <div *ngIf="submitted && checkOutForm.controls['code'].errors['pattern']">
                                Invalid Postal Code
                            </div>
                            <div *ngIf="submitted && checkOutForm.controls['code'].errors['maxlength']">
                                Maximum length is 6
                            </div>
                        </div>
                </div>
            </div>

            <div class="rightDiv">
                <p>Payment Details</p>
            <div class="form-group">
                <label>Name on card:</label>
                <input class="form-control" type="text" placeholder="Enter name" formControlName="name"
                    [ngClass]="{'is-invalid': submitted && checkOutForm.controls['name'].errors}" pattern="^[a-zA-Z]+$">
                <div *ngIf="submitted && checkOutForm.controls['name'].errors" class="text-danger">
                    <div *ngIf="submitted && checkOutForm.controls['name'].errors['required']">
                        Name is required
                    </div>
                    <div *ngIf="submitted && checkOutForm.controls['name'].errors['pattern']">
                        Name should only contain letters
                    </div>
                </div>
            </div>
                
                <div class="form-group">
                    <label>Card Number:</label>
                    <input class="form-control" type="text" placeholder="Enter card number" max="16" formControlName="card"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['card'].errors}" pattern="[0-9]{16}" maxlength="16"
                        (input)="sanitizeCardNumber($event)" required>
                    <div *ngIf="submitted && checkOutForm.controls['card'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['card'].errors['required']">
                            Card Number is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['card'].errors['pattern']">
                            Card Number should be 16 digits
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>CVV:(3 Digits)</label>
                    <input class="form-control" type="text" formControlName="cvv"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['cvv'].errors}" pattern="[0-9]{3}" maxlength="3"
                        (input)="sanitizeCVV($event)" required>
                    <div *ngIf="submitted && checkOutForm.controls['cvv'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['cvv'].errors['required']">
                            CVV is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['cvv'].errors['pattern']">
                            CVV should be 3 digits only
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Expiry Date: (MMYY)</label>
                    <input class="form-control" type="text" placeholder="MMYY" formControlName="exDate"
                        [ngClass]="{'is-invalid': submitted && checkOutForm.controls['exDate'].errors}" pattern="[0-9]{4}" maxlength="4"
                        (input)="sanitizeExpiryDate($event)" required>
                    <div *ngIf="submitted && checkOutForm.controls['exDate'].errors" class="text-danger">
                        <div *ngIf="submitted && checkOutForm.controls['exDate'].errors['required']">
                            Expiry Date is required
                        </div>
                        <div *ngIf="submitted && checkOutForm.controls['exDate'].errors['pattern']">
                            Expiry Date should be 4 digits only
                        </div>
                    </div>
                </div>
                <p>Order Summary</p>
                <hr>
                <span><b>Sub Total:</b> ${{grandTotal}}</span><br>
                <span><b>Delivery Charges:</b> ${{4.5}}</span><br>
                <span><b>GST:</b> ${{2.03}}</span><br>
                <hr>
                <span>Total: ${{grandTotal+6.53}}</span><br>
                <div class="buttons">
                    <button class="btn btn-warning" routerLink="/home">Shop More</button>
                    <button class="btn btn-success">Place Order</button>
                </div>

            </div>
        </form>
        
    </div>
</div>